[English](./README.md) | [í•œêµ­ì–´](./README.ko.md)

---

# Zomoc: íƒ€ì…-ì•ˆì „ API ëª¨í‚¹ì„ ìœ„í•œ Vite í”ŒëŸ¬ê·¸ì¸

Zomocì€ ë¶ˆì•ˆì •í•˜ê±°ë‚˜, ìˆ˜ì‹œë¡œ ë³€ê²½ë˜ê±°ë‚˜, ì•„ì§ ê°œë°œì´ ì™„ë£Œë˜ì§€ ì•Šì€ ë°±ì—”ë“œ API ë•Œë¬¸ì— í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì´ ë§‰íˆì§€ ì•Šë„ë¡ **APIì™€ì˜ ì˜ì¡´ì„±ì„ ë¶„ë¦¬(decouple)**í•´ì£¼ëŠ” Vite í”ŒëŸ¬ê·¸ì¸ì…ë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ì´ ì •ì˜í•œ TypeScript ì¸í„°í˜ì´ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ëª©(mock) ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•´ì£¼ê¸° ë•Œë¬¸ì—, APIì˜ ë°ì´í„° êµ¬ì¡°ê°€ ë³€ê²½ë˜ë”ë¼ë„ í•­ìƒ ìµœì‹  ìƒíƒœë¥¼ ìœ ì§€í•˜ë©° ì•ˆì‹¬í•˜ê³  UI ê°œë°œì— ì§‘ì¤‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Zomocì€ 'ì„¤ì •ì´ ì „í˜€ ì—†ëŠ”(zero-config)' ë„êµ¬ëŠ” ì•„ë‹™ë‹ˆë‹¤. ëŒ€ì‹  **'ìµœì†Œí•œì˜ ì„¤ì •(low-config)'**ìœ¼ë¡œ ìµœëŒ€ì˜ íš¨ê³¼ë¥¼ ë‚´ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤. `vite.config.ts`ì— ëª‡ ì¤„ë§Œ ì¶”ê°€í•˜ë©´, ë°±ì—”ë“œì˜ ìƒíƒœì™€ ìƒê´€ì—†ì´ ë…ë¦½ì ìœ¼ë¡œ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì„ ì´ì–´ë‚˜ê°ˆ ìˆ˜ ìˆëŠ” ê°•ë ¥í•œ íƒ€ì…-ì•ˆì „ ê°œë°œ í™˜ê²½ì´ ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤.

## âœ¨ Zomoc, ì´ëŸ´ ë•Œ ì‚¬ìš©í•˜ë©´ ì¢‹ì•„ìš”!

- **ì•ˆì •ì ì¸ ê°œë°œ í™˜ê²½**: ì‹¤ì œ API ì„œë²„ê°€ ë¶ˆì•ˆì •í•˜ê±°ë‚˜ ê°‘ìê¸° ë°”ë€Œì–´ë„, í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ íë¦„ì´ ëŠê¸°ì§€ ì•Šë„ë¡ ë³´í˜¸í•´ì¤ë‹ˆë‹¤.
- **ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ë°ì´í„° êµ¬ì¡°**: ëª© ë°ì´í„°ì˜ êµ¬ì¡°ê°€ í•­ìƒ ìµœì‹  TypeScript ì¸í„°í˜ì´ìŠ¤ì™€ ì¼ì¹˜í•¨ì„ ë³´ì¥í•˜ì—¬, ë°ì´í„° íƒ€ì… ë¶ˆì¼ì¹˜ë¡œ ì¸í•œ ë²„ê·¸ë¥¼ ì›ì²œì ìœ¼ë¡œ ì°¨ë‹¨í•©ë‹ˆë‹¤.
- **ë†’ì€ ìë™í™”**: ì—¬ëŸ¬ë¶„ì˜ íƒ€ì… ì •ì˜ì— ë§ì¶° ëª© ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•˜ê³  í•­ìƒ ìµœì‹  ìƒíƒœë¡œ ë™ê¸°í™”í•©ë‹ˆë‹¤.
- **ìœ ì—°í•œ íŒŒì¼ ê´€ë¦¬**: Glob íŒ¨í„´ì„ ì§€ì›í•˜ì—¬, í”„ë¡œì íŠ¸ ì–´ë””ì—ë“  ì›í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ëª© ì •ì˜ íŒŒì¼ê³¼ íƒ€ì… íŒŒì¼ì„ ë‘˜ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **ë™ì  ê²½ë¡œ ì§€ì›**: `/users/:id` ì™€ ê°™ì€ ë™ì  URL íŒ¨í„´ì„ ë³„ë„ ì„¤ì • ì—†ì´ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **ì‹¤ì‹œê°„ ë¦¬ë¡œë”©(HMR)**: ëª© ë°ì´í„°ë‚˜ íƒ€ì… íŒŒì¼ì„ ìˆ˜ì •í•˜ë©´, í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì—†ì´ ì¦‰ì‹œ ë°˜ì˜ë©ë‹ˆë‹¤.
- **ì»¤ìŠ¤í…€ ë°ì´í„° ìƒì„±**: `@faker-js/faker`ì™€ ê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì—°ê²°í•˜ì—¬, ì‹¤ì œ ë°ì´í„°ì²˜ëŸ¼ í’ë¶€í•œ ëª© ë°ì´í„°ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ğŸ“¦ ì„¤ì¹˜í•˜ê¸°

```bash
npm install -D zomoc
```

> **ì°¸ê³ **: `zomoc`ì€ `axios`, `zod`ë¥¼ peer ì˜ì¡´ì„±ìœ¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤. npm 7ë²„ì „ ì´ìƒì—ì„œëŠ” ì´ íŒ¨í‚¤ì§€ë“¤ì´ í”„ë¡œì íŠ¸ì— ì—†ë‹¤ë©´ ìë™ìœ¼ë¡œ í•¨ê»˜ ì„¤ì¹˜ë©ë‹ˆë‹¤.

## ğŸš€ 3ë‹¨ê³„ë¡œ ì‹œì‘í•˜ê¸°

ë‹¤ìŒ 3ë‹¨ê³„ë§Œ ë”°ë¼ í•˜ë©´ Zomocì„ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 1ë‹¨ê³„: Vite & TypeScript ì„¤ì •

`vite.config.ts`ì— `zomoc` í”ŒëŸ¬ê·¸ì¸ì„ ì¶”ê°€í•˜ê³ , `tsconfig.json`ì´ Zomocì˜ ê°€ìƒ ëª¨ë“ˆì„ ì¸ì‹í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•´ ì£¼ì„¸ìš”.

**`vite.config.ts`**

```typescript
// vite.config.ts
import { defineConfig } from "vite"
import zomoc from "zomoc/vite"

export default defineConfig({
  plugins: [
    zomoc(), // zomoc í”ŒëŸ¬ê·¸ì¸ì„ ì¶”ê°€í•©ë‹ˆë‹¤
  ],
})
```

**`tsconfig.json`**

```json
{
  "compilerOptions": {
    // ... ë‹¤ë¥¸ ì˜µì…˜ë“¤
    "types": ["zomoc/client"]
  }
}
```

### 2ë‹¨ê³„: ëª© ë°ì´í„°ì™€ íƒ€ì… ì •ì˜í•˜ê¸°

`mock.json` íŒŒì¼ê³¼, ì—¬ê¸°ì— ë§¤í•‘ë  `types.ts` íŒŒì¼ì„ ë§Œë“­ë‹ˆë‹¤.

**`src/api/mock.json`**

```json
{
  "GET /users": "IUserListResponse"
}
```

**`src/api/types.ts`**

```typescript
export interface IUser {
  id: string
  name: string
  email: string
}

export interface IUserListResponse {
  users: IUser[]
  total: number
}
```

### 3ë‹¨ê³„: ì¸í„°ì…‰í„° ì„¤ì •í•˜ê¸°

ì‚¬ìš©í•˜ëŠ” `axios` ì¸ìŠ¤í„´ìŠ¤ì— Zomoc ì¸í„°ì…‰í„°ë¥¼ ì—°ê²°í•©ë‹ˆë‹¤.

```typescript
// src/shared/api/index.ts
import axios from "axios"
import { setupMockingInterceptor } from "zomoc"
import { finalSchemaUrlMap } from "virtual:zomoc" // Zomocì´ ì œê³µí•˜ëŠ” ê°€ìƒ ëª¨ë“ˆì…ë‹ˆë‹¤

const api = axios.create({ baseURL: "https://api.example.com" })

// zomocì´ ì´ axios ì¸ìŠ¤í„´ìŠ¤ì˜ ìš”ì²­ì„ ê°€ë¡œì±„ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤
setupMockingInterceptor(api, {
  enabled: import.meta.env.DEV, // ê°œë°œ í™˜ê²½ì—ì„œë§Œ ëª¨í‚¹ì„ í™œì„±í™”í•©ë‹ˆë‹¤
  registry: finalSchemaUrlMap,
  debug: true, // (ì„ íƒ) ì½˜ì†”ì— ëª©í‚¹ëœ ìš”ì²­ì„ ë¡œê·¸ë¡œ ì¶œë ¥í•©ë‹ˆë‹¤
})

export { api }
```

ì´ì œ ëª¨ë“  ì„¤ì •ì´ ëë‚¬ìŠµë‹ˆë‹¤! ê°œë°œ ì„œë²„ë¥¼ ì‹¤í–‰í•˜ê³  ì•±ì—ì„œ `api.get('/users')`ë¥¼ í˜¸ì¶œí•˜ë©´, Zomocì´ íƒ€ì…-ì•ˆì „í•œ ëª© ë°ì´í„°ë¥¼ ëŒ€ì‹  ì‘ë‹µí•´ì¤„ ê²ë‹ˆë‹¤.

## ğŸ“š ìƒì„¸ ê°€ì´ë“œ

ë” ìì„¸í•œ ì„¤ì •ì´ë‚˜ ê³ ê¸‰ ê¸°ëŠ¥ì´ ê¶ê¸ˆí•˜ì‹ ê°€ìš”?

### íŒŒì¼ ê²½ë¡œ ë³€ê²½í•˜ê¸°

ê¸°ë³¸ì ìœ¼ë¡œ Zomocì€ `**/mock.json`, `**/interface.ts`, `**/type.ts` íŒŒì¼ì„ ì°¾ìŠµë‹ˆë‹¤. `vite.config.ts`ì—ì„œ ì´ ê²½ë¡œë¥¼ ì›í•˜ëŠ” ëŒ€ë¡œ ë°”ê¿€ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```typescript
// vite.config.ts
import zomoc from "zomoc/vite"

export default {
  plugins: [
    zomoc({
      // ëª© ì •ì˜ íŒŒì¼ì˜ ê²½ë¡œ íŒ¨í„´
      mockPaths: ["src/features/**/mock.json"],
      // íƒ€ì… ì •ì˜ íŒŒì¼ì˜ ê²½ë¡œ íŒ¨í„´
      interfacePaths: ["src/features/**/model/*.ts"],
    }),
  ],
}
```

### ë” ì§„ì§œ ê°™ì€ ë°ì´í„° ë§Œë“¤ê¸° (Custom Data Generators)

ê¸°ë³¸ì ìœ¼ë¡œ `zomoc`ì€ ê°„ë‹¨í•œ ì„ì‹œ ë°ì´í„°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. `@faker-js/faker` ê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ ë” í˜„ì‹¤ì ì¸ ë°ì´í„°ë¥¼ ë§Œë“¤ê³  ì‹¶ë‹¤ë©´, `customGenerators` ì˜µì…˜ì„ ì‚¬ìš©í•´ ë³´ì„¸ìš”.

**1. ë¨¼ì €, fakerë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.**

```bash
npm install -D @faker-js/faker
```

**2. ì»¤ìŠ¤í…€ ìƒì„±ê¸°ë¥¼ ë§Œë“¤ì–´ ì¸í„°ì…‰í„°ì— ì „ë‹¬í•©ë‹ˆë‹¤.**

```typescript
// src/shared/api/index.ts
import { setupMockingInterceptor, type CustomGenerators } from "zomoc"
import { faker } from "@faker-js/faker"

// ë‚˜ë§Œì˜ ë°ì´í„° ìƒì„± ê·œì¹™ì„ ë§Œë“­ë‹ˆë‹¤
const customGenerators: CustomGenerators = {
  string: (key) => {
    // í”„ë¡œí¼í‹° í‚¤(key)ì— ë”°ë¼ ë‹¤ë¥¸ ë°ì´í„°ë¥¼ ìƒì„±
    if (key.toLowerCase().includes("email")) return faker.internet.email()
    if (key.toLowerCase().includes("name")) return faker.person.fullName()
    return faker.lorem.sentence()
  },
  number: () => faker.number.int({ max: 1000 }),
}

setupMockingInterceptor(api, {
  // ...ë‹¤ë¥¸ ì„¤ì •ë“¤
  customGenerators,
})
```

ì´ë ‡ê²Œ í•˜ë©´, `zomoc`ì´ ë°ì´í„°ë¥¼ ìƒì„±í•  ë•Œ ì—¬ëŸ¬ë¶„ì´ ë§Œë“  ê·œì¹™ì„ ë”°ë¥´ê²Œ ë©ë‹ˆë‹¤.
